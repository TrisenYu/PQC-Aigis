/// Last modified at 2025年07月31日 星期四 16时38分46秒
#include "aigis_comp.h"

int16_t test_po[AIGIS_N] = {
      100,   200,   300,   400,   500,   600,   700,   800,   900,  1000,  1100,  1201,  1301,  1402,  1503,  1607,
     1700,  1800,  1900,  2000,  2100,  2200,  2300,  2400,  2500,  2600,  2700,  2801,  2901,  3002,  3103,  3207,
     3300,  3400,  3500,  3600,  3700,  3800,  3900,  4000,  4100,  4200,  4300,  4401,  4501,  4602,  4703,  4807,
     4900,  5000,  5100,  5200,  5300,  5400,  5500,  5600,  5700,  5800,  5900,  6001,  6101,  6202,  6303,  6407,
     6500,  6600,  6700,  6800,  6900,  7000,  7100,  7200,  7300,  7400,  7500,  7601,  7701,  7802,  7903,  8007,
     8100,  8200,  8300,  8400,  8500,  8600,  8700,  8800,  8900,  9000,  9100,  9201,  9301,  9402,  9503,  9607,
     9700,  9800,  9900, 10000, 10100, 10200, 10300, 10400, 10500, 10600, 10700, 10801, 10901, 11002, 11103, 11207,
    11300, 11400, 11500, 11600, 11700, 11800, 11900, 12000, 12100, 12200, 12300, 12401, 12501, 12602, 12703, 12807,
    12900, 13000, 13100, 13200, 13300, 13400, 13500, 13600, 13700, 13800, 13900, 14001, 14101, 14202, 14303, 14407,
    14500, 14600, 14700, 14800, 14900, 15000, 15100, 15200, 15300, 15400, 15500, 15601, 15701, 15802, 15903, 16007,
    16100, 16200, 16300, 16400, 16500, 16600, 16700, 16800, 16900, 17000, 17100, 17201, 17301, 17402, 17503, 17607,
    17700, 17800, 17900, 18000, 18100, 18200, 18300, 18400, 18500, 18600, 18700, 18801, 18901, 19002, 19103, 19207,
    19300, 19400, 19500, 19600, 19700, 19800, 19900, 20000, 20100, 20200, 20300, 20401, 20501, 20602, 20703, 20807,
    20900, 21000, 21100, 21200, 21300, 21400, 21500, 21600, 21700, 21800, 21900, 22001, 22101, 22202, 22303, 22407,
    22500, 22600, 22700, 22800, 22900, 23000, 23100, 23200, 23300, 23400, 23500, 23601, 23701, 23802, 23903, 24007,
    24100, 24200, 24300, 24400, 24500, 24600, 24700, 24800, 24900, 25000, 25100, 25201, 25301, 25402, 25503, 25607
}, test_ly[2][AIGIS_N] = {
    {
          1,   2,   3,   4,   5,   6,   7,   8,   9,  10,  11,  12,  13,  14,  15,  16,
     17,  18,  19,  20,  21,  22,  23,  24,  25,  26,  27,  28,  29,  30,  31,  32,
     33,  34,  35,  36,  37,  38,  39,  40,  41,  42,  43,  44,  45,  46,  47,  48,
     49,  50,  51,  52,  53,  54,  55,  56,  57,  58,  59,  60,  61,  62,  63,  64,
     65,  66,  67,  68,  69,  70,  71,  72,  73,  74,  75,  76,  77,  78,  79,  80,
     81,  82,  83,  84,  85,  86,  87,  88,  89,  90,  91,  92,  93,  94,  95,  96,
     97,  98,  99, 100, 101, 102, 103, 104, 105, 106, 107, 108, 109, 110, 111, 112,
    113, 114, 115, 116, 117, 118, 119, 120, 121, 122, 123, 124, 125, 126, 127, 128,
    129, 130, 131, 132, 133, 134, 135, 136, 137, 138, 139, 140, 141, 142, 143, 144,
    145, 146, 147, 148, 149, 150, 151, 152, 153, 154, 155, 156, 157, 158, 159, 160,
    161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176,
    177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192,
    193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208,
    209, 210, 211, 212, 213, 214, 215, 216, 217, 218, 219, 220, 221, 222, 223, 224,
    225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 235, 236, 237, 238, 239, 240,
    241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 256
    },
    {
    1, 0, 2, 0, 3, 0, 4, 0, 5, 0, 6, 0, 7, 0, 8, 0,
    8, 0, 1, 0, 2, 0, 3, 0, 4, 0, 5, 0, 6, 0, 7, 0,
    7, 0, 8, 0, 1, 0, 2, 0, 3, 0, 4, 0, 5, 0, 6, 0,
    6, 0, 7, 0, 8, 0, 1, 0, 2, 0, 3, 0, 4, 0, 5, 0,
    5, 0, 6, 0, 7, 0, 8, 0, 1, 0, 2, 0, 3, 0, 4, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,
    0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1
    }
};
uint8_t buf[AIGIS_ENC_CFT_SIZE];
int16_t now[AIGIS_N];
int main() {
    printf("%d\n", AIGIS_ENC_BITS_CFT2);
    enc_cft_poly_compresser(buf, test_po);
	puts("helo?");
    for (int i = 0; i < AIGIS_ENC_COMP_CFT2_SIZE; i ++) {
        printf("%02x", buf[i]);
        if (!((i+1)&15)) { puts(""); }
    }
	puts("helo?");
    // 有点过于奇怪了
    enc_cft_poly_decompresser(now, buf);
	puts("helo?");
    for (int i = 0; i < AIGIS_N; i ++) {
        printf("%05d, ", now[i]);
        if (!((i+1)&15)) { puts(""); }
    }
	puts("helo?");
    return 0;
}
